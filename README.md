# Supabase Online Tracker

åŸºäº Supabase çš„è·¨è®¾å¤‡å®æ—¶åœ¨çº¿çŠ¶æ€ç®¡ç†åº“ï¼Œä¸“ä¸ºç®¡ç†å¹³å°è®¾è®¡ã€‚

## ğŸ¯ é€‚ç”¨åœºæ™¯

- **åœ¨çº¿æ•™è‚²å¹³å°** - æ•™å¸ˆæŸ¥çœ‹å­¦ç”Ÿå®æ—¶åœ¨çº¿çŠ¶æ€ï¼Œç›‘æ§å­¦ä¹ æ´»è·ƒåº¦
- **ä¼ä¸šåŸ¹è®­ç³»ç»Ÿ** - ç®¡ç†å‘˜ç›‘æ§å‘˜å·¥åŸ¹è®­å‚ä¸æƒ…å†µ
- **äººå‘˜ç®¡ç†ç³»ç»Ÿ** - HR æŸ¥çœ‹å‘˜å·¥åœ¨çº¿çŠ¶æ€ï¼Œè€ƒå‹¤ç®¡ç†
- **å®¢æœç³»ç»Ÿ** - ç®¡ç†å®¢æœäººå‘˜åœ¨çº¿çŠ¶æ€ï¼Œåˆç†åˆ†é…å·¥å•
- **åä½œå¹³å°** - æ˜¾ç¤ºå›¢é˜Ÿæˆå‘˜å®æ—¶åœ¨çº¿æƒ…å†µ

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### åœ¨çº¿çŠ¶æ€è¿½è¸ªï¼ˆå¿…é€‰ï¼‰
- âœ… **è·¨è®¾å¤‡æ£€æµ‹** - çœŸæ­£çš„è·¨è®¾å¤‡å®æ—¶åœ¨çº¿çŠ¶æ€
- âœ… **æ™ºèƒ½å¿ƒè·³** - è‡ªåŠ¨ç»´æŠ¤åœ¨çº¿çŠ¶æ€ï¼Œ30ç§’å¿ƒè·³é—´éš”
- âœ… **è‡ªåŠ¨æ¸…ç†** - è‡ªåŠ¨æ¸…ç†è¶…è¿‡5åˆ†é’Ÿæœªæ´»è·ƒçš„ç”¨æˆ·
- âœ… **å¼‚å¸¸å¤„ç†** - å¤„ç†å´©æºƒã€æ–­ç½‘ã€é¡µé¢å…³é—­ç­‰å¼‚å¸¸æƒ…å†µ
- âœ… **å¤šæ ‡ç­¾é¡µæ”¯æŒ** - åŒä¸€ç”¨æˆ·å¤šæ ‡ç­¾é¡µçŠ¶æ€åŒæ­¥
- âœ… **é”™è¯¯é‡è¯•** - è‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚ï¼ˆæœ€å¤š3æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ï¼‰

### å®æ—¶è®¢é˜…ï¼ˆå¯é€‰ï¼‰
- âœ… **å®æ—¶é€šçŸ¥** - ç›‘å¬ç”¨æˆ·ä¸Šçº¿/ç¦»çº¿äº‹ä»¶
- âœ… **è‡ªåŠ¨æ›´æ–°** - æ— éœ€æ‰‹åŠ¨åˆ·æ–°ï¼Œå®æ—¶åŒæ­¥åœ¨çº¿åˆ—è¡¨
- âœ… **äº‹ä»¶å›è°ƒ** - è‡ªå®šä¹‰ç”¨æˆ·ä¸Šçº¿/ç¦»çº¿å¤„ç†é€»è¾‘

### é¦–æ¬¡ç™»å½•æ£€æµ‹ï¼ˆå¯é€‰ï¼‰
- âœ… **æ–°ç”¨æˆ·è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·æ˜¯å¦é¦–æ¬¡ç™»å½•
- âœ… **çµæ´»é…ç½®** - å¯é€‰å¯ç”¨ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½
- âœ… **é€‚ç”¨åœºæ™¯** - æ–°æ‰‹å¼•å¯¼ã€æ¬¢è¿æ¶ˆæ¯ã€ç»Ÿè®¡åˆ†æ

### æ¡†æ¶é›†æˆ
- âœ… **React Hooks** - å¼€ç®±å³ç”¨çš„ `useOnlineStatus` å’Œ `useOnlineUsers`
- âœ… **Vue Composables** - Vue 3 Composition API æ”¯æŒ
- âœ… **TypeScript** - å®Œæ•´çš„ç±»å‹å®šä¹‰

### å…¶ä»–ç‰¹æ€§
- âœ… **é›¶ä¾èµ–** - ä»…ä¾èµ– Supabase å®¢æˆ·ç«¯
- âœ… **çµæ´»é…ç½®** - å¿ƒè·³é—´éš”ã€è¶…æ—¶æ—¶é—´ã€é‡è¯•æ¬¡æ•°å¯è‡ªå®šä¹‰
- âœ… **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå›è°ƒæœºåˆ¶

## ğŸ“¦ å®‰è£…

```bash
npm install supabase-online-tracker
# æˆ–
yarn add supabase-online-tracker
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºæ•°æ®åº“è¡¨

åœ¨ä½ çš„ Supabase é¡¹ç›®ä¸­æ‰§è¡Œä»¥ä¸‹ SQLï¼š

```sql
-- åœ¨çº¿ç”¨æˆ·è¡¨ï¼ˆå¿…éœ€ï¼‰
CREATE TABLE online_users (
    id BIGSERIAL PRIMARY KEY,
    username TEXT UNIQUE NOT NULL,
    last_activity TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_online_users_username ON online_users(username);
CREATE INDEX idx_online_users_last_activity ON online_users(last_activity);

-- å¦‚æœéœ€è¦é¦–æ¬¡ç™»å½•æ£€æµ‹åŠŸèƒ½ï¼Œåœ¨ä½ çš„ç”¨æˆ·è¡¨ä¸­æ·»åŠ å­—æ®µ
ALTER TABLE users 
ADD COLUMN IF NOT EXISTS has_logged_in BOOLEAN DEFAULT FALSE;
```

### 2. åˆå§‹åŒ–

```javascript
import { createClient } from '@supabase/supabase-js';
import { OnlineStatusManager } from 'supabase-online-tracker';

// åˆ›å»º Supabase å®¢æˆ·ç«¯
const supabase = createClient('YOUR_SUPABASE_URL', 'YOUR_SUPABASE_ANON_KEY');

// åˆ›å»ºåœ¨çº¿çŠ¶æ€ç®¡ç†å™¨
const onlineManager = new OnlineStatusManager(supabase, {
  // åœ¨çº¿çŠ¶æ€é…ç½®
  tableName: 'online_users',        // å¯é€‰ï¼Œé»˜è®¤ 'online_users'
  heartbeatInterval: 30000,         // å¯é€‰ï¼Œé»˜è®¤ 30ç§’
  inactiveTimeout: 300000,          // å¯é€‰ï¼Œé»˜è®¤ 5åˆ†é’Ÿ
  
  // é¦–æ¬¡ç™»å½•æ£€æµ‹é…ç½®ï¼ˆå¯é€‰ï¼‰
  enableFirstLoginTracking: false,  // æ˜¯å¦å¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹ï¼Œé»˜è®¤ false
  userTable: 'users',               // ç”¨æˆ·è¡¨åï¼ˆå¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹æ—¶å¿…éœ€ï¼‰
  usernameField: 'username',        // ç”¨æˆ·åå­—æ®µï¼Œé»˜è®¤ 'username'
  
  // é”™è¯¯å¤„ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
  maxRetries: 3,                    // æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ 3
  retryDelay: 1000,                 // é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 1000
  onError: (error, operation) => {  // é”™è¯¯å›è°ƒ
    console.error(`æ“ä½œå¤±è´¥: ${operation}`, error);
  },
  
  // å®æ—¶è®¢é˜…é…ç½®ï¼ˆå¯é€‰ï¼‰
  enableRealtime: false,            // æ˜¯å¦å¯ç”¨å®æ—¶è®¢é˜…ï¼Œé»˜è®¤ false
  onUserJoin: (user) => {           // ç”¨æˆ·ä¸Šçº¿å›è°ƒ
    console.log('ç”¨æˆ·ä¸Šçº¿:', user.username);
  },
  onUserLeave: (user) => {          // ç”¨æˆ·ç¦»çº¿å›è°ƒ
    console.log('ç”¨æˆ·ç¦»çº¿:', user.username);
  }
});
```

### 3. ä½¿ç”¨

#### åŸºç¡€ç”¨æ³•ï¼ˆä»…åœ¨çº¿çŠ¶æ€è¿½è¸ªï¼‰

```javascript
// ç”¨æˆ·ç™»å½•æ—¶
await onlineManager.userLogin('username');

// è·å–åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
const onlineUsers = await onlineManager.getOnlineUsers();
console.log('åœ¨çº¿ç”¨æˆ·:', onlineUsers);
// [{ username: 'user1', lastActivity: 1703059800000 }]

// ç”¨æˆ·ç™»å‡ºæ—¶
await onlineManager.userLogout();
```

#### é«˜çº§ç”¨æ³•ï¼ˆå¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹ï¼‰

```javascript
// åˆå§‹åŒ–æ—¶å¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹
const onlineManager = new OnlineStatusManager(supabase, {
  enableFirstLoginTracking: true,
  userTable: 'users'
});

// ç”¨æˆ·ç™»å½•æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹
const { isFirstLogin } = await onlineManager.userLogin('username');

if (isFirstLogin) {
  console.log('æ¬¢è¿æ–°ç”¨æˆ·ï¼è¿™æ˜¯ä½ çš„é¦–æ¬¡ç™»å½•');
  // æ˜¾ç¤ºæ–°æ‰‹å¼•å¯¼ã€æ¬¢è¿æ¶ˆæ¯ç­‰
}
```

#### å®æ—¶è®¢é˜…ç”¨æ³•

```javascript
// å¯ç”¨å®æ—¶è®¢é˜…
const onlineManager = new OnlineStatusManager(supabase, {
  enableRealtime: true,
  onUserJoin: (user) => {
    console.log(`${user.username} ä¸Šçº¿äº†`);
    // æ›´æ–° UIï¼Œæ˜¾ç¤ºé€šçŸ¥ç­‰
  },
  onUserLeave: (user) => {
    console.log(`${user.username} ç¦»çº¿äº†`);
    // æ›´æ–° UI
  }
});

// ç™»å½•åè‡ªåŠ¨å¼€å§‹ç›‘å¬
await onlineManager.userLogin('username');
```

#### åœ¨çº¿æ—¶é•¿é™åˆ¶

```javascript
// é™åˆ¶ç”¨æˆ·æœ€å¤šåœ¨çº¿ 1 å°æ—¶
const onlineManager = new OnlineStatusManager(supabase, {
  maxOnlineTime: 3600000,  // 1å°æ—¶ï¼ˆæ¯«ç§’ï¼‰
  warningTime: 3000000,    // 50åˆ†é’Ÿæ—¶è­¦å‘Š
  onTimeWarning: (timeLeft) => {
    alert(`è¿˜æœ‰ ${Math.floor(timeLeft/60000)} åˆ†é’Ÿå°†è‡ªåŠ¨ç™»å‡º`);
  },
  onTimeLimit: () => {
    alert('åœ¨çº¿æ—¶é•¿å·²è¾¾ä¸Šé™ï¼Œè¯·ä¼‘æ¯');
    // è‡ªåŠ¨ç™»å‡º
  }
});

// è·å–å½“å‰åœ¨çº¿æ—¶é•¿
const onlineTime = onlineManager.getCurrentOnlineTime(); // æ¯«ç§’

// è·å–å‰©ä½™æ—¶é•¿
const remaining = onlineManager.getRemainingTime(); // æ¯«ç§’
```

#### æœç´¢å’Œè¿‡æ»¤åœ¨çº¿ç”¨æˆ·

```javascript
// æœç´¢ç”¨æˆ·ååŒ…å« "john" çš„åœ¨çº¿ç”¨æˆ·
const users = await onlineManager.getOnlineUsers({
  search: 'john'
});

// è‡ªå®šä¹‰è¿‡æ»¤æ¡ä»¶
const users = await onlineManager.getOnlineUsers({
  filter: {
    department: 'æŠ€æœ¯éƒ¨',
    role: 'developer'
  }
});

// åˆ†é¡µæŸ¥è¯¢
const users = await onlineManager.getOnlineUsers({
  limit: 20,
  offset: 0,
  orderBy: 'last_activity',
  ascending: false
});

// è·å–åœ¨çº¿ç”¨æˆ·æ€»æ•°
const count = await onlineManager.getOnlineUserCount({
  search: 'john'
});
```

#### æ´»è·ƒåº¦ç»Ÿè®¡ï¼ˆæ‰©å±•åŠŸèƒ½ï¼‰

```javascript
import { ActivityStats } from 'supabase-online-tracker/extensions/stats';

// åˆ›å»ºç»Ÿè®¡å®ä¾‹ï¼ˆè‡ªå®šä¹‰é…ç½®ï¼‰
const stats = new ActivityStats(supabase, {
  retentionDays: 30,    // ä¿ç•™30å¤©æ•°æ®ï¼ˆé»˜è®¤ï¼‰
  autoCleanup: true     // å¯ç”¨è‡ªåŠ¨æ¸…ç†ï¼ˆé»˜è®¤ï¼‰
});

// è®°å½•ç™»å½•
await stats.recordLogin('username', {
  deviceType: 'desktop',
  deviceInfo: { os: 'Windows', browser: 'Chrome' }
});

// è®°å½•ç™»å‡º
await stats.recordLogout('username');

// è·å–ç”¨æˆ·ç»Ÿè®¡
const userStats = await stats.getUserStats('username', {
  period: 'today'  // today, week, month, year
});
// è¿”å›: { loginCount, totalOnlineTime, averageSessionTime, sessions }

// è·å–æ´»è·ƒç”¨æˆ·æ’è¡Œ
const topUsers = await stats.getTopActiveUsers({
  limit: 10,
  period: 'week'
});

// æ‰‹åŠ¨æ¸…ç†è¿‡æœŸè®°å½•ï¼ˆä¿ç•™7å¤©ï¼‰
await stats.cleanupOldRecords(7);

// æŸ¥çœ‹å­˜å‚¨ç»Ÿè®¡
const storageStats = await stats.getStorageStats();
console.log(storageStats);
// {
//   totalRecords: 1500,
//   oldestRecord: '2024-01-01T00:00:00Z',
//   newestRecord: '2024-01-30T23:59:59Z',
//   dataSpanDays: 30,
//   retentionDays: 30,
//   autoCleanupEnabled: true,
//   estimatedSize: '~300 KB'
// }

// é”€æ¯å®ä¾‹ï¼ˆåœæ­¢è‡ªåŠ¨æ¸…ç†ï¼‰
stats.destroy();
```

**æ•°æ®ä¿ç•™å»ºè®®ï¼š**
- å°å‹åº”ç”¨ï¼ˆ< 100 ç”¨æˆ·ï¼‰ï¼šä¿ç•™ 30 å¤©
- ä¸­å‹åº”ç”¨ï¼ˆ100-1000 ç”¨æˆ·ï¼‰ï¼šä¿ç•™ 14-30 å¤©
- å¤§å‹åº”ç”¨ï¼ˆ> 1000 ç”¨æˆ·ï¼‰ï¼šä¿ç•™ 7-14 å¤©
- å¦‚éœ€é•¿æœŸåˆ†æï¼Œå»ºè®®å®šæœŸå¯¼å‡ºæ±‡æ€»æ•°æ®

#### React é›†æˆ

```javascript
import { useOnlineStatus, useOnlineUsers } from 'supabase-online-tracker/hooks';

function MyComponent() {
  // ç®¡ç†å½“å‰ç”¨æˆ·åœ¨çº¿çŠ¶æ€
  const { isOnline, login, logout } = useOnlineStatus(supabase);
  
  // è·å–åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼ˆè‡ªåŠ¨å®æ—¶æ›´æ–°ï¼‰
  const { users, loading, refresh } = useOnlineUsers(supabase, {
    enableRealtime: true
  });
  
  return (
    <div>
      <button onClick={() => login('username')}>ç™»å½•</button>
      <p>åœ¨çº¿ç”¨æˆ·: {users.length}</p>
    </div>
  );
}
```

#### Vue é›†æˆ

```javascript
import { useOnlineStatus, useOnlineUsers } from 'supabase-online-tracker/composables';

export default {
  setup() {
    // ç®¡ç†å½“å‰ç”¨æˆ·åœ¨çº¿çŠ¶æ€
    const { isOnline, login, logout } = useOnlineStatus(supabase);
    
    // è·å–åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼ˆè‡ªåŠ¨å®æ—¶æ›´æ–°ï¼‰
    const { users, loading, refresh } = useOnlineUsers(supabase, {
      enableRealtime: true
    });
    
    return { isOnline, users, login, logout };
  }
};
```

## ğŸ“– API æ–‡æ¡£

### OnlineStatusManager

#### æ„é€ å‡½æ•°

```javascript
new OnlineStatusManager(supabase, options)
```

**å‚æ•°ï¼š**
- `supabase` - Supabase å®¢æˆ·ç«¯å®ä¾‹
- `options` (å¯é€‰)
  - `tableName` - åœ¨çº¿ç”¨æˆ·è¡¨åï¼Œé»˜è®¤ `'online_users'`
  - `heartbeatInterval` - å¿ƒè·³é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ `30000`
  - `inactiveTimeout` - ä¸æ´»è·ƒè¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ `300000`
  - `enableFirstLoginTracking` - æ˜¯å¦å¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹ï¼Œé»˜è®¤ `false`
  - `userTable` - ç”¨æˆ·è¡¨åï¼ˆå¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹æ—¶å¿…éœ€ï¼‰ï¼Œé»˜è®¤ `'users'`
  - `usernameField` - ç”¨æˆ·åå­—æ®µåï¼Œé»˜è®¤ `'username'`

#### æ–¹æ³•

##### `userLogin(username)`

ç”¨æˆ·ç™»å½•æ—¶è°ƒç”¨ï¼Œå¯åŠ¨åœ¨çº¿çŠ¶æ€è¿½è¸ªã€‚

**å‚æ•°ï¼š**
- `username` (string) - ç”¨æˆ·å

**è¿”å›å€¼ï¼š** `Promise<{isFirstLogin: boolean}>`
- å¦‚æœå¯ç”¨äº†é¦–æ¬¡ç™»å½•æ£€æµ‹ï¼Œè¿”å› `isFirstLogin` è¡¨ç¤ºæ˜¯å¦é¦–æ¬¡ç™»å½•
- å¦‚æœæœªå¯ç”¨ï¼Œ`isFirstLogin` å§‹ç»ˆä¸º `false`

```javascript
const { isFirstLogin } = await onlineManager.userLogin('username');
```

##### `userLogout()`

ç”¨æˆ·ç™»å‡ºæ—¶è°ƒç”¨ï¼Œåœæ­¢åœ¨çº¿çŠ¶æ€è¿½è¸ªã€‚

```javascript
await onlineManager.userLogout();
```

##### `getOnlineUsers()`

è·å–å½“å‰åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼ˆè‡ªåŠ¨æ¸…ç†è¿‡æœŸç”¨æˆ·ï¼‰ã€‚

```javascript
const users = await onlineManager.getOnlineUsers();
// è¿”å›: [{ username: string, lastActivity: number }]
```

##### `updateStatus(username)`

æ‰‹åŠ¨æ›´æ–°ç”¨æˆ·åœ¨çº¿çŠ¶æ€ï¼ˆé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼‰ã€‚

```javascript
await onlineManager.updateStatus('username');
```

## ğŸ”§ å·¥ä½œåŸç†

### å¿ƒè·³æœºåˆ¶

- ç”¨æˆ·ç™»å½•åï¼Œæ¯30ç§’è‡ªåŠ¨æ›´æ–° `last_activity` æ—¶é—´æˆ³
- é¡µé¢éšè—æ—¶æš‚åœå¿ƒè·³ï¼Œé‡æ–°å¯è§æ—¶æ¢å¤
- é¡µé¢å…³é—­æ—¶è‡ªåŠ¨æ¸…ç†åœ¨çº¿çŠ¶æ€

### è‡ªåŠ¨æ¸…ç†

- è·å–åœ¨çº¿ç”¨æˆ·æ—¶è‡ªåŠ¨æ¸…ç†è¶…è¿‡5åˆ†é’Ÿæœªæ´»è·ƒçš„ç”¨æˆ·
- å¤„ç†æµè§ˆå™¨å´©æºƒã€ç½‘ç»œæ–­å¼€ç­‰å¼‚å¸¸æƒ…å†µ

### å¤šæ ‡ç­¾é¡µ

- åŒä¸€ç”¨æˆ·å¤šä¸ªæ ‡ç­¾é¡µå…±äº«åŒä¸€æ¡åœ¨çº¿è®°å½•
- ä»»æ„æ ‡ç­¾é¡µçš„å¿ƒè·³éƒ½ä¼šæ›´æ–°çŠ¶æ€
- æ‰€æœ‰æ ‡ç­¾é¡µå…³é—­åæ‰ä¼šæ¸…ç†

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- åœ¨çº¿æ•™è‚²å¹³å° - æ˜¾ç¤ºå­¦ç”Ÿåœ¨çº¿çŠ¶æ€
- åä½œå·¥å…· - æ˜¾ç¤ºå›¢é˜Ÿæˆå‘˜åœ¨çº¿æƒ…å†µ
- ç¤¾äº¤åº”ç”¨ - å¥½å‹åœ¨çº¿çŠ¶æ€
- ç®¡ç†åå° - ç›‘æ§ç”¨æˆ·æ´»è·ƒåº¦

## ğŸ’¡ é«˜çº§åŠŸèƒ½

### é¦–æ¬¡ç™»å½•æ£€æµ‹

å¦‚æœä½ éœ€è¦æ£€æµ‹ç”¨æˆ·æ˜¯å¦é¦–æ¬¡ç™»å½•ï¼ˆä¾‹å¦‚æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯ã€å¼•å¯¼æ•™ç¨‹ç­‰ï¼‰ï¼Œå¯ä»¥å¯ç”¨é¦–æ¬¡ç™»å½•æ£€æµ‹åŠŸèƒ½ï¼š

```javascript
const { isFirstLogin } = await onlineManager.userLogin('username', {
  userTable: 'users'  // ä½ çš„ç”¨æˆ·è¡¨å
});

if (isFirstLogin) {
  // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
  showWelcomeMessage();
  // æˆ–å¯åŠ¨æ–°æ‰‹å¼•å¯¼
  startTutorial();
}
```

**å·¥ä½œåŸç†ï¼š**
1. åœ¨ç”¨æˆ·è¡¨ä¸­æ·»åŠ  `has_logged_in` å­—æ®µï¼ˆå¸ƒå°”å€¼ï¼‰
2. é¦–æ¬¡ç™»å½•æ—¶ï¼Œè¯¥å­—æ®µä¸º `false`ï¼Œè¿”å› `isFirstLogin: true`
3. ç™»å½•åè‡ªåŠ¨æ›´æ–°ä¸º `true`ï¼Œåç»­ç™»å½•è¿”å› `isFirstLogin: false`

**æ³¨æ„ï¼š** éœ€è¦å…ˆåœ¨ç”¨æˆ·è¡¨ä¸­æ·»åŠ  `has_logged_in` å­—æ®µï¼ˆå‚è€ƒ SQL è„šæœ¬ï¼‰ã€‚

## ğŸ“ ç¤ºä¾‹

### è¿è¡Œç¤ºä¾‹

1. **é…ç½® Supabase**
   ```bash
   # å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
   cp examples/.env.example examples/.env
   
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Supabase å‡­è¯
   # æˆ–ç›´æ¥åœ¨ç¤ºä¾‹æ–‡ä»¶ä¸­æ›¿æ¢ YOUR_SUPABASE_URL å’Œ YOUR_SUPABASE_ANON_KEY
   ```

2. **å¯åŠ¨ HTTP æœåŠ¡å™¨**
   ```bash
   cd examples
   npx serve .
   # æˆ–ä½¿ç”¨ python -m http.server 8000
   ```

3. **è®¿é—®ç¤ºä¾‹**
   - åŸºç¡€ç¤ºä¾‹ï¼šhttp://localhost:3000/basic-usage.html
   - ç®¡ç†åå°ï¼šhttp://localhost:3000/admin-dashboard.html

### åŸºç¡€ç¤ºä¾‹
æŸ¥çœ‹ `examples/basic-usage.html` - ç®€å•çš„ç™»å½•/ç™»å‡ºå’Œåœ¨çº¿ç”¨æˆ·åˆ—è¡¨ã€‚

### ç®¡ç†åå°ç¤ºä¾‹
æŸ¥çœ‹ `examples/admin-dashboard.html` - å®Œæ•´çš„ç®¡ç†åå°ç•Œé¢ï¼ŒåŒ…å«ï¼š
- å®æ—¶åœ¨çº¿ç”¨æˆ·ç»Ÿè®¡
- åœ¨çº¿ç”¨æˆ·åˆ—è¡¨
- è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½
- ç¾è§‚çš„ UI ç•Œé¢

### React/Vue é›†æˆ
æŸ¥çœ‹ [FAQ æ–‡æ¡£](./docs/FAQ.md#é›†æˆç›¸å…³) äº†è§£å¦‚ä½•åœ¨æ¡†æ¶ä¸­ä½¿ç”¨ã€‚

## ğŸ“š æ–‡æ¡£

- [å¸¸è§é—®é¢˜è§£ç­” (FAQ)](./docs/FAQ.md)
- [æ•…éšœæ’æŸ¥æŒ‡å—](./docs/TROUBLESHOOTING.md)
- [API å‚è€ƒ](#api-å‚è€ƒ)

## ğŸ—ºï¸ è·¯çº¿å›¾

### å·²å®Œæˆ âœ…
- âœ… åœ¨çº¿çŠ¶æ€è¿½è¸ª
- âœ… æ™ºèƒ½å¿ƒè·³æœºåˆ¶
- âœ… å®æ—¶è®¢é˜…
- âœ… é¦–æ¬¡ç™»å½•æ£€æµ‹
- âœ… åœ¨çº¿æ—¶é•¿é™åˆ¶
- âœ… æœç´¢å’Œè¿‡æ»¤
- âœ… æ´»è·ƒåº¦ç»Ÿè®¡
- âœ… React/Vue é›†æˆ

### è®¡åˆ’ä¸­ ğŸš§

#### v1.3.0 - æ‰¹é‡æ“ä½œå’Œå†å²è®°å½•
- ğŸ”œ **æ‰¹é‡æ“ä½œ** - ç®¡ç†å‘˜æ‰¹é‡ç®¡ç†ç”¨æˆ·åœ¨çº¿çŠ¶æ€
  - æ‰¹é‡å¼ºåˆ¶ä¸‹çº¿
  - æ‰¹é‡æ›´æ–°çŠ¶æ€
  - æ‰¹é‡æŸ¥è¯¢
  
- ğŸ”œ **å†å²è®°å½•æŸ¥è¯¢** - æŸ¥è¯¢ç”¨æˆ·å†å²åœ¨çº¿è®°å½•
  - ç™»å½•/ç™»å‡ºå†å²
  - åœ¨çº¿æ—¶é•¿ç»Ÿè®¡
  - æ•°æ®å¯¼å‡ºåŠŸèƒ½
  - è‡ªåŠ¨å½’æ¡£æœºåˆ¶

#### æœªæ¥ç‰ˆæœ¬
- ç”¨æˆ·çŠ¶æ€æ‰©å±•ï¼ˆbusy, away, dndï¼‰
- è®¾å¤‡ä¿¡æ¯è¿½è¸ª
- ç¾¤ç»„/æˆ¿é—´æ”¯æŒ
- åœ°ç†ä½ç½®è¿½è¸ªï¼ˆå¯é€‰ï¼‰

### è´¡çŒ®
æ¬¢è¿æäº¤ Issue æˆ– PR æ¥å»ºè®®æ–°åŠŸèƒ½æˆ–æ”¹è¿›ï¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

MIT
